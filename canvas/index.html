<!DOCTYPE html>
<html class="no-js">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title></title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="./css/toolbar.css" />
    <link rel="stylesheet" href="./css/nameTag.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Sans+Condensed&display=swap"
      rel="stylesheet" />
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi"
      crossorigin="anonymous" />
    <!-- bootstrap icon -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />

    <!-- fontawesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
      integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU"
      crossorigin="anonymous" />

    <!-- animatecss -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
  </head>

  <body>
    <div id="canvas-container">
      <canvas
        id="canvas-real"
        class="canvas"
        width="1280px"
        height="720px"></canvas>
      <canvas
        id="canvas-draft"
        class="canvas"
        width="1280px"
        height="720px"></canvas>
    </div>

    <div class="menubar">
      <nav class="navbar">
        <div class="container-fluid">
          <button class="menubtn" id="drawing-line">
            <i class="bi bi-pencil"></i>
            Free Line
          </button>

          <button class="menubtn" id="drawing-straight-line">
            <i class="bi bi-dash-lg"></i>
            Straight Line
          </button>

          <button class="menubtn" id="drawing-curved">
            <img src="./img/curveline.png" class="curveline" />
            Cruved Line
          </button>

          <button class="menubtn" id="drawing-rectangle">
            <i class="bi bi-square"></i>
            Rectangle
          </button>

          <button class="menubtn" id="drawing-triangle-equil">
            <i class="bi bi-triangle"></i>
            Triangle
          </button>

          <button class="menubtn" id="drawing-circle">
            <i class="bi bi-circle"></i>
            Circle
          </button>

          <button class="menubtn" id="quard">
            <img src="./img/rhombus.png" class="rhombus" alt="" />
            Quard
          </button>

          <!-- <button class="menubtn" id="triangle">
          <i class="bi bi-triangle"></i>
          Triangle
        </button> -->

          <!-- <button class="menubtn" id="rhombus">
          <img src="./img/rhombus.png" class="rhombus" alt="">
          Rhombus
        </button> -->

          <button class="menubtn" id="submit-text">
            <i class="bi bi-chat-left-text"></i>
            Text
          </button>

          <button class="menubtn" id="background">
            <i class="bi bi-easel"></i>
            Background
          </button>

          <button class="menubtn" id="eraser">
            <i class="bi bi-eraser"></i>
            Eraser
          </button>
        </div>
      </nav>
    </div>

    <!-- nametag -->
    <div class="nameTag"></div>

    <div class="block">
      <br />
      <div class="control-top"><strong>Control Panel</strong></div>
      <br />

      <table style="width: 100%">
        <tr>
          <td class="tool">Project Name:</td>
          <td>
            <input type="text" value="Your Project Name Here" id="title" />
          </td>
        </tr>
      </table>
      <br />
      <table style="width: 100%">
        <tr>
          <td class="tool">Line Width:</td>
          <td>
            <input
              type="range"
              min="1"
              max="10"
              value=""
              class="slider"
              id="slider" />
          </td>
        </tr>
      </table>
      <br />
      <table style="width: 100%">
        <tr>
          <td class="tool">Text & Size:</td>
          <td>
            <input type="text" value="Text here" id="insert-text" />
            <input
              type="number"
              value="30"
              id="text-size"
              name="quantity"
              min="1"
              max="100" />
          </td>
        </tr>
      </table>
      <br />
      <table style="width: 100%">
        <tr>
          <td class="tool">Color Palette:</td>
          <td>
            <input
              type="color"
              id="color-picker"
              name="favcolor"
              value="#000000" />
          </td>
        </tr>
      </table>
      <br />

      <table style="width: 100%">
        <tr>
          <td>
            <button class="undo-redo" id="undo">
              <div><i class="bi bi-arrow-clockwise"></i>Undo</div>
            </button>
          </td>
          <td>
            <button class="undo-redo" id="clear">
              <div><i class="bi bi-escape"></i>Clear</div>
            </button>
          </td>
          <td>
            <button class="undo-redo" id="redo">
              <div><i class="bi bi-arrow-counterclockwise"></i>Redo</div>
            </button>
          </td>
        </tr>
      </table>
      <br />

      <div>
        <button id="download" class="download-button">
          <i class="bi bi-cloud-arrow-down"></i>Download
        </button>
      </div>
    </div>

    <!-- jQuery -->
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"></script>

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
      crossorigin="anonymous"></script>

    <!-- undo-redo script -->
    <script src="https://cdn.rawgit.com/magicien/undo-canvas/v0.1.3/undo-canvas.js"></script>

    <!-- The drawing functionality  -->
    <script src="./javascript/canvas-common.js" type="text/javascript"></script>

    <!-- inserttext  -->
    <script src="./javascript/drawing-text.js" type="text/javascript"></script>

    <!-- The eraser functionality  -->
    <script src="./javascript/eraser.js" type="text/javascript"></script>

    <!-- The drawing curved functionality  -->
    <script
      src="./javascript/drawing-curved.js"
      type="text/javascript"></script>

    <!-- The drawing circle functionality  -->
    <script
      src="./javascript/drawing-circle.js"
      type="text/javascript"></script>

    <!-- The drawing line functionality  -->
    <script src="./javascript/drawing-line.js" type="text/javascript"></script>

    <!-- The drawing straight line functionality  -->
    <script
      src="./javascript/drawing-straight-line.js"
      type="text/javascript"></script>
    <!-- The drawing rectangle functionality  -->
    <script
      src="./javascript/drawing-rectangle.js"
      type="text/javascript"></script>

    <script src="./javascript/drawing-quard.js"></script>

    <!-- Triangle Drawing -->
    <script src="./javascript/triangle.js"></script>
    <!-- Rhombus Drawing -->
    <script src="./javascript/rhombus.js"></script>

    <script src="./javascript/drawing-triangle-equil.js"></script>

    <script type="text/javascript">
      var activeButton = "#drawing-line";
      var eraser_color = "rgb(150,150,150)";

      function change() {
        $("button").removeClass("currentFunction");
        $(activeButton).addClass("currentFunction");
        $(".canvas").removeClass("eraserCursor");
        $(".canvas").addClass("crosshairCursor");
      }

      change();

      $(() => {
        currentFunction = new DrawingLine(contextReal);
        activeButton == "#drawing-line";

        // 1
        $("#drawing-line").click(() => {
          currentFunction = new DrawingLine(contextReal);
          activeButton = "#drawing-line";
          change();
        });

        // 2
        $("#drawing-straight-line").click(() => {
          currentFunction = new DrawingStraightLine(contextReal, contextDraft);
          activeButton = "#drawing-straight-line";
          change();
        });

        // 3
        $("#drawing-curved").click(() => {
          currentFunction = new DrawingCurved(contextReal, contextDraft);
          activeButton = "#drawing-curved";
          change();
        });

        //4
        $("#drawing-rectangle").click(() => {
          currentFunction = new DrawingRectangle(contextReal, contextDraft);
          activeButton = "#drawing-rectangle";
          change();
        });

        //5
        $("#drawing-triangle-equil").click(() => {
          currentFunction = new DrawingTriangleEquil(contextReal, contextDraft);
          activeButton = "#drawing-triangle-equil";
          change();
        });

        //6
        $("#drawing-circle").click(() => {
          currentFunction = new DrawingCircle(contextReal, contextDraft);
          activeButton = "#drawing-circle";
          change();
        });

        //6
        $("#drawing-circle").click(() => {
          currentFunction = new DrawingCircle(contextReal, contextDraft);
          activeButton = "#drawing-circle";
          change();
        });

        //7
        // $("#rhombus").click(() => {
        //   currentFunction = new Rhombus(contextReal, contextDraft);
        //   activeButton="#rhombus";
        //   change();
        // });

        //7
        $("#quard").click(() => {
          currentFunction = new DrawingQuard(contextReal, contextDraft);
          activeButton = "#quard";
          change();
        });

        //8
        $("#submit-text").click(() => {
          currentFunction = new DrawingText(contextReal, contextDraft);
          activeButton = "#submit-text";
          change();
        });

        //9
        $("#background").click(() => {
          eraser_color = userColor;
          contextReal.fillStyle = userColor;
          contextReal.fillRect(0, 0, 1280, 720);
          activeButton = "#background";
          change();
        });

        //10
        $("#eraser").click(() => {
          currentFunction = new eraser(contextReal, contextDraft);
          activeButton = "#eraser";
          change();
          $(".canvas").removeClass("crosshairCursor");
          $(".canvas").addClass("eraserCursor");
        });

        //disabled
        $("#triangle").click(() => {
          currentFunction = new Triangle(contextReal, contextDraft);
        });

        $("#download").click(() => {
          $("#download").addClass("animate__animated animate__bounce");
          let canvasUrl = canvasReal.toDataURL();
          // Create an anchor, and set the href value to our data URL
          const createEl = document.createElement("a");
          createEl.href = canvasUrl;

          // This is the name of our downloaded file
          createEl.download = $("#title").val();

          // Click the download button, causing a download, and then remove it
          createEl.click();
          createEl.remove();
        });

        $("#undo").click(() => {
          contextReal.undo();
        });
        $("#redo").click(() => {
          contextReal.redo();
        });

        setInterval(clearAnimation, 1500);

        function clearAnimation() {
          $("#download").removeClass("animate__animated animate__bounce");
        }
      });
    </script>
  </body>
</html>
